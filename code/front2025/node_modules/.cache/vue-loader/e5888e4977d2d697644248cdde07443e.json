{"remainingRequest":"E:\\javaweb\\2\\源码+数据库+导入视频\\源码+数据库+导入视频\\源码\\front2025\\node_modules\\_vue-loader@15.11.1@vue-loader\\lib\\index.js??vue-loader-options!E:\\javaweb\\2\\源码+数据库+导入视频\\源码+数据库+导入视频\\源码\\front2025\\src\\components\\page\\admin\\GoodsList.vue?vue&type=style&index=0&id=512070c4&scoped=true&lang=css","dependencies":[{"path":"E:\\javaweb\\2\\源码+数据库+导入视频\\源码+数据库+导入视频\\源码\\front2025\\src\\components\\page\\admin\\GoodsList.vue","mtime":1761791376381},{"path":"E:\\javaweb\\2\\源码+数据库+导入视频\\源码+数据库+导入视频\\源码\\front2025\\node_modules\\_css-loader@1.0.1@css-loader\\index.js","mtime":499162500000},{"path":"E:\\javaweb\\2\\源码+数据库+导入视频\\源码+数据库+导入视频\\源码\\front2025\\node_modules\\_vue-loader@15.11.1@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\javaweb\\2\\源码+数据库+导入视频\\源码+数据库+导入视频\\源码\\front2025\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\javaweb\\2\\源码+数据库+导入视频\\源码+数据库+导入视频\\源码\\front2025\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\javaweb\\2\\源码+数据库+导入视频\\源码+数据库+导入视频\\源码\\front2025\\node_modules\\_vue-loader@15.11.1@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n.handle-box {\n     margin-bottom: 20px;\n }\n.handle-input {\n     width: 300px;\n     display: inline-block;\n }\n.table {\n     width: 100%;\n     font-size: 14px;\n }\n.mr10 {\n     margin-right: 10px;\n }\n.table-td-thumb {\n     display: block;\n     margin: auto;\n     width: 40px;\n     height: 40px;\n }\n.avatar-uploader .el-upload {\n     border: 1px dashed #d9d9d9;\n     border-radius: 6px;\n     cursor: pointer;\n     position: relative;\n     overflow: hidden;\n }\n.avatar-uploader .el-upload:hover {\n     border-color: #eeab1e;\n }\n.avatar-uploader-icon {\n     font-size: 28px;\n     color: #8c939d;\n     width: 178px;\n     height: 178px;\n     line-height: 178px;\n     text-align: center;\n }\n.avatar {\n     width: 100% !important;\n     height: 178px;\n     display: block;\n }\n.video-js .vjs-icon-placeholder {\n     width: 80%;\n     height: 80%;\n     display: block;\n }\n::v-deep .el-upload--text{\n     width: 100px !important;\n     height: 100px !important;\n }\n.avatar-uploader-icon {\n     font-size: 28px;\n     color: #8c939d;\n     width: 100px;\n     height: 100px;\n     line-height: 100px;\n     text-align: center;\n }\n.avatar {\n     width: 100px !important;\n     height: 100px;\n     display: block;\n }\n\n",{"version":3,"sources":["GoodsList.vue"],"names":[],"mappings":";AAkYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GoodsList.vue","sourceRoot":"src/components/page/admin","sourcesContent":["<template>\n    <div>\n      <div class=\"container\">\n        <div class=\"handle-box\">\n           <el-select class=\"handle-input mr10\" clearable v-model=\"query.cid\" placeholder=\"선택하세요\">\n               <el-option v-for=\"item in categoryList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n           </el-select>\n           <el-input v-model=\"query.name\" placeholder=\"이름 선택\" class=\"handle-input mr10\"></el-input>\n           <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"getData\">조회</el-button>\n           <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"handleAdd\">추가</el-button>\n        </div>\n        <el-table :data=\"tableData\" border class=\"table\" ref=\"multipleTable\" header-cell-class-name=\"table-header\" >\n          <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"categoryName\" label=\"분류 이름\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"image\" label=\"상품 이미지\" align=\"center\">\n              <template slot-scope=\"scope\">\n                  <img style=\"width: 60px;\" :src=\"scope.row.image\" />\n              </template>\n          </el-table-column>\n          <el-table-column prop=\"name\" label=\"상품 이름\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"remark\" label=\"소개\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"money\" label=\"가격\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"num\" label=\"재고\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"status\" label=\"상태\" align=\"center\">\n              <template slot-scope=\"scope\">\n                  <el-button  type=\"success\" size=\"mini\" v-if=\"scope.row.status == '已发布'\">게시됨</el-button>\n                  <el-button  type=\"success\" size=\"mini\" v-if=\"scope.row.status == '已下架'\">판매중지</el-button>\n              </template>\n          </el-table-column>\n          <el-table-column prop=\"createTime\" label=\"게시 시간\" align=\"center\"></el-table-column>\n          <el-table-column label=\"작업\" align=\"center\" width=\"260\" >\n            <template slot-scope=\"scope\">\n              <el-button  type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">편집</el-button>\n              <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"handleDelete(scope.$index, scope.row)\">삭제</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n  \n        <div align=\"center\">\n          <el-pagination\n              @size-change=\"handleSizeChange\"\n              @current-change=\"handleCurrentChange\"\n              :current-page=\"currentPage\"\n              :page-sizes=\"[10, 20, 30, 40]\"\n              :page-size=\"pagesize\"\n              layout=\"total, sizes, prev, pager, next, jumper\"\n              :total=\"totalCount\">\n          </el-pagination>\n        </div>\n      </div>\n  \n      <!-- 팝업창 -->\n      <el-dialog :title=\"dialogName\" :visible.sync=\"dialogVisible\" width=\"55%\">\n          <el-form ref=\"ruleForm\" :model=\"form\" :rules=\"rules\" label-width=\"90px\">\n          <el-form-item label=\"분류\" prop=\"cid\">\n              <el-select v-model=\"form.cid\" clearable placeholder=\"선택하세요\">\n                  <el-option v-for=\"item in categoryList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n              </el-select>\n          </el-form-item>\n          <el-form-item label=\"상품 이미지\" prop=\"image\">\n              <el-upload class=\"avatar-uploader\" action=\"mty\" :show-file-list=\"false\" :http-request=\"httpRequest\">\n                   <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n                   <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n              </el-upload>\n              <el-input type=\"hidden\" v-model=\"form.image\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"상품 이름\" prop=\"name\">\n              <el-input v-model=\"form.name\" placeholder=\"상품 이름\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"소개\" prop=\"remark\">\n              <el-input v-model=\"form.remark\" placeholder=\"소개\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"가격\" prop=\"money\">\n              <el-input v-model=\"form.money\" placeholder=\"가격\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"재고\" prop=\"num\">\n              <el-input type='number' oninput=\"if(value<0)value=0\" v-model=\"form.num\" placeholder=\"재고\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"상태\" prop=\"status\">\n              <el-select v-model=\"form.status\" clearable placeholder=\"상태\">\n              <el-option label=\"게시됨\" value=\"已发布\"></el-option>\n              <el-option label=\"판매중지\" value=\"已下架\"></el-option>\n              </el-select>\n          </el-form-item>\n           <el-card style=\"height: 610px;\">\n              <quill-editor v-model=\"form.content\" ref=\"myQuillEditor\" style=\"height: 500px;\" :options=\"editorOption\"></quill-editor>\n           </el-card>\n        </el-form>\n         <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">취소</el-button>\n          <el-button type=\"primary\" @click=\"save('ruleForm')\">확인</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  </template>\n  \n  <script>\n  import { quillEditor, Quill } from 'vue-quill-editor'\n  import { container, ImageExtend, QuillWatch } from \"quill-image-super-solution-module\";\n  Quill.register(\"modules/ImageExtend\", ImageExtend);\n  import 'quill/dist/quill.core.css'\n  import 'quill/dist/quill.snow.css'\n  import 'quill/dist/quill.bubble.css'\n  import { isIntNumer,isMoney } from '../../../utils/checkForm'\n  \n  export default {\n    name: \"Goods\",\n    components: {\n       quillEditor\n    },\n    data() {\n        var validateIntNumber = (rule, value, callback) => {\n               if(!value){\n                  callback();\n               } else if (!isIntNumer(value)) {\n                  callback(new Error(\"정수를 입력하세요\"));\n               } else {\n                  callback();\n               }\n         };\n        var validateMoney = (rule, value, callback) => {\n               if(!value){\n                  callback();\n               } else if (!isMoney(value)) {\n                  callback(new Error(\"올바른 금액을 입력하세요\"));\n               } else {\n                  callback();\n               }\n         };\n      return {\n          query: {},\n          dialogName: '', \n          tableData: [],\n          currentPage: 1,\n          pagesize: 10,\n          totalCount: 0,\n          imageUrl: null,\n          fileUrl: null,\n          dialogVisible: false,\n          form: {},\n          rules: {\n            cid: [\n                { required: true, message: '분류를 입력하세요', trigger: 'blur' },\n            ],\n            image: [\n                { required: true, message: '상품 이미지를 입력하세요', trigger: 'blur' },\n            ],\n            name: [\n                { required: true, message: '상품 이름을 입력하세요', trigger: 'blur' },\n            ],\n            remark: [\n                { required: true, message: '소개를 입력하세요', trigger: 'blur' },\n            ],\n            money: [\n                { required: true, message: '가격을 입력하세요', trigger: 'blur' },\n                { validator: validateMoney, trigger: 'blur'},\n            ],\n            num: [\n                { required: true, message: '재고를 입력하세요', trigger: 'blur' },\n                { validator: validateIntNumber, trigger: 'blur'},\n            ],\n            content: [\n                { required: true, message: '상품 소개를 입력하세요', trigger: 'blur' },\n            ],\n            status: [\n                { required: true, message: '상태를 입력하세요', trigger: 'blur' },\n            ],\n          },\n          editorOption: {\n             modules: {\n                ImageExtend: {\n                    name: \"file\",\n                    action: \"/api/file/imgUpload\",\n                    accept: \"image/jpg, image/png, image/gif, image/jpeg, image/bmp, image/x-icon\",\n                    response: (res) => {\n                       return res.data;\n                    }\n                },\n                toolbar: {\n                    container: container,\n                    handlers: {\n                        image: function() {\n                             QuillWatch.emit(this.quill.id);\n                        },\n                     },\n                 },\n             },\n           },\n          categoryList:[],\n          type:'',\n          userInfo:{},\n      };\n    },\n    created() {\n        this.type = this.common.get('type');\n        this.userInfo = this.common.getUserInfo('userInfo');\n        if(this.userInfo===null){\n           this.$router.push('/');\n        }\n        this.getData();\n        this.querycategory()\n    },\n    methods: {\n      querycategory(){\n          this.categoryList = [];\n          this.$axios.post('/api/category/queryAll',{}).then(res => {\n              for(var i in res.data.data){\n                 this.categoryList.push({id:res.data.data[i].id+'',name:res.data.data[i].name});\n              }\n           });\n       },\n      httpRequest(item) {\n          const isJPG = item.file.type == 'image/jpeg' || item.file.type == 'image/png' || item.file.type == 'image/jpg';\n          const isLt2M = item.file.size / 1024 / 1024 < 2;\n          if (!isJPG) {\n               this.$message.error('JPG 또는 PNG 형식만 업로드 가능합니다!');\n          }\n          if (!isLt2M) {\n               this.$message.error('업로드 파일 크기는 2MB를 초과할 수 없습니다!');\n          }\n          if (isJPG && isLt2M == true) {\n              let App = this;\n              let mf = new FormData();\n              mf.append('file', item.file);\n              this.$axios.post('/api/file/imgUpload',mf).then(res => {\n                    if (res.data.code == 200) {\n                        this.$message.success({\n                            title: '알림',\n                            message: res.data.msg,\n                        });\n                        App.imageUrl =res.data.data;\n                        App.form.image = res.data.data;\n                    } else {\n                        this.$message.error({title: '알림',message: res.data.msg});\n                    }\n                });\n            }\n       },\n      handleSizeChange(val) {\n          this.pagesize = val;\n          this.getData();\n      },\n      handleCurrentChange(val) {\n          this.currentPage = val;\n          this.getData();\n      },\n      getData() {\n          var param = {\n              cid: this.query.cid, \n              name: this.query.name, \n              pagesize: this.pagesize,\n              currentPage: this.currentPage,\n          };\n          this.$axios.post('/api/goods/selectPage',param).then(res => {\n              if(res.data.code == 200){\n                  this.tableData = res.data.data.list;\n                  this.totalCount = res.data.data.total;\n              } else {\n                  this.$message.warning(res.data.msg);\n              }\n          });\n      },\n      handleEdit(index, row) {\n          this.form = JSON.parse(JSON.stringify(row));\n          this.imageUrl = row.image;\n          this.querycategory();\n          this.form.cid = this.form.cid+'';\n          this.dialogVisible = true;\n          this.$refs['ruleForm'].clearValidate();\n          this.dialogName = \"상품 편집\";\n      },\n      handleAdd() {\n          if (this.$refs.rulform !== undefined) this.$refs.rulform.resetFields();\n          this.dialogVisible = true;\n          this.imageUrl = '';\n          this.querycategory();\n          this.form = {};\n          this.form.status='已发布';\n          this.$refs['ruleForm'].clearValidate();\n          this.dialogName = \"상품 추가\";\n      },\n      save(formName) {\n          this.$refs[formName].validate((valid) => {\n            if (valid) {\n              this.$axios.post(this.form.id?'/api/goods/edit' : '/api/goods/add', this.form).then(res => {\n                if(res.data.code == 200){\n                  this.$message.success(res.data.msg);\n                  this.dialogVisible = false;\n                  this.getData();\n                } else {\n                  this.$message.warning(res.data.msg);\n                }\n              })\n            } else {\n              console.log('error submit!!');\n              return false;\n            }\n          });\n      },\n      handleDelete(index, row) {\n          this.$confirm('삭제하시겠습니까?', '알림', { type: 'warning' })\n          .then(() => {\n               this.$axios.get('/api/goods/deleteById?id='+row.id).then(res => {\n                  if(res.data.code == 200){\n                      this.currentPage = 1\n                      this.getData();\n              }else{\n                this.$message.warning(res.data.msg);\n              }\n            });\n          }).catch(() => {})\n      },\n    }\n  }\n  </script>\n  \n  \n\n<style scoped>\n    .handle-box {\n         margin-bottom: 20px;\n     }\n    .handle-input {\n         width: 300px;\n         display: inline-block;\n     }\n    .table {\n         width: 100%;\n         font-size: 14px;\n     }\n    .mr10 {\n         margin-right: 10px;\n     }\n    .table-td-thumb {\n         display: block;\n         margin: auto;\n         width: 40px;\n         height: 40px;\n     }\n    .avatar-uploader .el-upload {\n         border: 1px dashed #d9d9d9;\n         border-radius: 6px;\n         cursor: pointer;\n         position: relative;\n         overflow: hidden;\n     }\n    .avatar-uploader .el-upload:hover {\n         border-color: #eeab1e;\n     }\n    .avatar-uploader-icon {\n         font-size: 28px;\n         color: #8c939d;\n         width: 178px;\n         height: 178px;\n         line-height: 178px;\n         text-align: center;\n     }\n    .avatar {\n         width: 100% !important;\n         height: 178px;\n         display: block;\n     }\n    .video-js .vjs-icon-placeholder {\n         width: 80%;\n         height: 80%;\n         display: block;\n     }\n    ::v-deep .el-upload--text{\n         width: 100px !important;\n         height: 100px !important;\n     }\n    .avatar-uploader-icon {\n         font-size: 28px;\n         color: #8c939d;\n         width: 100px;\n         height: 100px;\n         line-height: 100px;\n         text-align: center;\n     }\n    .avatar {\n         width: 100px !important;\n         height: 100px;\n         display: block;\n     }\n\n</style>"]}]}